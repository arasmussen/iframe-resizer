/*! iFrame Resizer (iframeSizer.contentWindow.min.js) - v3.5.3 - 2016-05-17
 *  Desc: Include this file in any page being loaded into an iframe
 *        to force the iframe to resize to the content size.
 *  Requires: iframeResizer.min.js on host page.
 *  Copyright: (c) 2016 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */

!function(a){"use strict";function b(b,c,d){"addEventListener"in a?b.addEventListener(c,d,!1):"attachEvent"in a&&b.attachEvent("on"+c,d)}function c(b,c,d){"removeEventListener"in a?b.removeEventListener(c,d,!1):"detachEvent"in a&&b.detachEvent("on"+c,d)}function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a){var b,c,d,e=null,f=0,g=function(){f=Ha(),e=null,d=a.apply(b,c),e||(b=c=null)};return function(){var h=Ha();f||(f=h);var i=za-(h-f);return b=this,c=arguments,0>=i||i>za?(e&&(clearTimeout(e),e=null),f=h,d=a.apply(b,c),e||(b=c=null)):e||(e=setTimeout(g,i)),d}}function f(a){return oa+"["+qa+"] "+a}function g(b){na&&"object"==typeof a.console&&console.log(f(b))}function h(b){"object"==typeof a.console&&console.warn(f(b))}function i(){j(),g("Initialising iFrame ("+location.href+")"),k(),n(),m("background",Y),m("padding",aa),A(),s(),t(),o(),C(),u(),ka=B(),P("init","Init message from host page"),Fa()}function j(){function a(a){return"true"===a}var b=ja.substr(pa).split(":");qa=b[0],Z=void 0!==b[1]?Number(b[1]):Z,ba=void 0!==b[2]?a(b[2]):ba,na=void 0!==b[3]?a(b[3]):na,la=void 0!==b[4]?Number(b[4]):la,W=void 0!==b[6]?a(b[6]):W,$=b[7],ha=void 0!==b[8]?b[8]:ha,Y=b[9],aa=b[10],wa=void 0!==b[11]?Number(b[11]):wa,ka.enable=void 0!==b[12]?a(b[12]):!1,sa=void 0!==b[13]?b[13]:sa,Ca=void 0!==b[14]?b[14]:Ca}function k(){function b(){var b=a.iFrameResizer;g("Reading data from page: "+JSON.stringify(b)),Ea="messageCallback"in b?b.messageCallback:Ea,Fa="readyCallback"in b?b.readyCallback:Fa,va="targetOrigin"in b?b.targetOrigin:va,ha="heightCalculationMethod"in b?b.heightCalculationMethod:ha,Ca="widthCalculationMethod"in b?b.widthCalculationMethod:Ca}"iFrameResizer"in a&&Object===a.iFrameResizer.constructor&&b(),g("TargetOrigin for parent set to: "+va)}function l(a,b){return-1!==b.indexOf("-")&&(h("Negative CSS value ignored for "+a),b=""),b}function m(a,b){void 0!==b&&""!==b&&"null"!==b&&(document.body.style[a]=b,g("Body "+a+' set to "'+b+'"'))}function n(){void 0===$&&($=Z+"px"),m("margin",l("margin",$))}function o(){document.documentElement.style.height="",document.body.style.height="",g('HTML & body height set to "auto"')}function p(e){function f(){P(e.eventName,e.eventType)}var h={add:function(c){b(a,c,f)},remove:function(b){c(a,b,f)}};e.eventNames&&Array.prototype.map?(e.eventName=e.eventNames[0],e.eventNames.map(h[e.method])):h[e.method](e.eventName),g(d(e.method)+" event listener: "+e.eventType)}function q(a){p({method:a,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),p({method:a,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),p({method:a,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),p({method:a,eventType:"Input",eventName:"input"}),p({method:a,eventType:"Mouse Up",eventName:"mouseup"}),p({method:a,eventType:"Mouse Down",eventName:"mousedown"}),p({method:a,eventType:"Orientation Change",eventName:"orientationchange"}),p({method:a,eventType:"Print",eventName:["afterprint","beforeprint"]}),p({method:a,eventType:"Ready State Change",eventName:"readystatechange"}),p({method:a,eventType:"Touch Start",eventName:"touchstart"}),p({method:a,eventType:"Touch End",eventName:"touchend"}),p({method:a,eventType:"Touch Cancel",eventName:"touchcancel"}),p({method:a,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),p({method:a,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),p({method:a,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===sa&&p({method:a,eventType:"IFrame Resized",eventName:"resize"})}function r(a,b,c,d){return b!==a&&(a in c||(h(a+" is not a valid option for "+d+"CalculationMethod."),a=b),g(d+' calculation method set to "'+a+'"')),a}function s(){ha=r(ha,ga,Ia,"height")}function t(){Ca=r(Ca,Ba,Ja,"width")}function u(){!0===W?(q("add"),F()):g("Auto Resize disabled")}function v(){g("Disable outgoing messages"),ta=!1}function w(){g("Remove event listener: Message"),c(a,"message",U)}function x(){null!==_&&_.disconnect()}function y(){q("remove"),x(),clearInterval(ma)}function z(){v(),w(),!0===W&&y()}function A(){var a=document.createElement("div");a.style.clear="both",a.style.display="block",document.body.appendChild(a)}function B(){function c(){return{x:void 0!==a.pageXOffset?a.pageXOffset:document.documentElement.scrollLeft,y:void 0!==a.pageYOffset?a.pageYOffset:document.documentElement.scrollTop}}function d(a){var b=a.getBoundingClientRect(),d=c();return{x:parseInt(b.left,10)+parseInt(d.x,10),y:parseInt(b.top,10)+parseInt(d.y,10)}}function e(a){function b(a){var b=d(a);g("Moving to in page link (#"+c+") at x: "+b.x+" y: "+b.y),T(b.y,b.x,"scrollToOffset")}var c=a.split("#")[1]||a,e=decodeURIComponent(c),f=document.getElementById(e)||document.getElementsByName(e)[0];void 0!==f?b(f):(g("In page link (#"+c+") not found in iFrame, so sending to parent"),T(0,0,"inPageLink","#"+c))}function f(){""!==location.hash&&"#"!==location.hash&&e(location.href)}function i(){function a(a){function c(a){a.preventDefault(),e(this.getAttribute("href"))}"#"!==a.getAttribute("href")&&b(a,"click",c)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),a)}function j(){b(a,"hashchange",f)}function k(){setTimeout(f,da)}function l(){Array.prototype.forEach&&document.querySelectorAll?(g("Setting up location.hash handlers"),i(),j(),k()):h("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return ka.enable?l():g("In page linking not enabled"),{findTarget:e}}function C(){g("Enable public methods"),Da.parentIFrame={autoResize:function(a){return!0===a&&!1===W?(W=!0,u()):!1===a&&!0===W&&(W=!1,y()),W},close:function(){T(0,0,"close"),z()},getId:function(){return qa},getPageInfo:function(a){"function"==typeof a?(Ga=a,T(0,0,"pageInfo")):(Ga=function(){},T(0,0,"pageInfoStop"))},moveToAnchor:function(a){ka.findTarget(a)},reset:function(){S("parentIFrame.reset")},scrollTo:function(a,b){T(b,a,"scrollTo")},scrollToOffset:function(a,b){T(b,a,"scrollToOffset")},sendMessage:function(a,b){T(0,0,"message",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){ha=a,s()},setWidthCalculationMethod:function(a){Ca=a,t()},setTargetOrigin:function(a){g("Set targetOrigin: "+a),va=a},size:function(a,b){var c=""+(a?a:"")+(b?","+b:"");P("size","parentIFrame.size("+c+")",a,b)}}}function D(){0!==la&&(g("setInterval: "+la+"ms"),ma=setInterval(function(){P("interval","setInterval: "+la)},Math.abs(la)))}function E(){function b(a){function b(a){!1===a.complete&&(g("Attach listeners to "+a.src),a.addEventListener("load",f,!1),a.addEventListener("error",h,!1),k.push(a))}"attributes"===a.type&&"src"===a.attributeName?b(a.target):"childList"===a.type&&Array.prototype.forEach.call(a.target.querySelectorAll("img"),b)}function c(a){k.splice(k.indexOf(a),1)}function d(a){g("Remove listeners from "+a.src),a.removeEventListener("load",f,!1),a.removeEventListener("error",h,!1),c(a)}function e(a,b,c){d(a.target),P(b,c+": "+a.target.src,void 0,void 0)}function f(a){e(a,"imageLoad","Image loaded")}function h(a){e(a,"imageLoadFailed","Image load failed")}function i(a){P("mutationObserver","mutationObserver: "+a[0].target+" "+a[0].type),a.forEach(b)}function j(){var a=document.querySelector("body"),b={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return m=new l(i),g("Create body MutationObserver"),m.observe(a,b),m}var k=[],l=a.MutationObserver||a.WebKitMutationObserver,m=j();return{disconnect:function(){"disconnect"in m&&(g("Disconnect body MutationObserver"),m.disconnect(),k.forEach(d))}}}function F(){var b=0>la;a.MutationObserver||a.WebKitMutationObserver?b?D():_=E():(g("MutationObserver not supported in this browser!"),D())}function G(a,b){function c(a){var c=/^\d+(px)?$/i;if(c.test(a))return parseInt(a,X);var d=b.style.left,e=b.runtimeStyle.left;return b.runtimeStyle.left=b.currentStyle.left,b.style.left=a||0,a=b.style.pixelLeft,b.style.left=d,b.runtimeStyle.left=e,a}var d=0;return b=b||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(d=document.defaultView.getComputedStyle(b,null),d=null!==d?d[a]:0):d=c(b.currentStyle[a]),parseInt(d,X)}function H(a){a>za/2&&(za=2*a,g("Event throttle increased to "+za+"ms"))}function I(a,b){for(var c=b.length,e=0,f=0,h=d(a),i=Ha(),j=0;c>j;j++)e=b[j].getBoundingClientRect()[a]+G("margin"+h,b[j]),e>f&&(f=e);return i=Ha()-i,g("Parsed "+c+" HTML elements"),g("Element position calculated in "+i+"ms"),H(i),f}function J(a,b){for(var c=b.length,d=0,e=0,f=Ha(),h=0;c>h;h++)d=b[h].getBoundingClientRect()[a],d>e&&(e=d);return f=Ha()-f,g("Parsed "+c+" HTML elements"),g("Element position calculated in "+f+"ms"),H(f),e}function K(a){return[a.bodyOffset(),a.bodyScroll(),a.documentElementOffset(),a.documentElementScroll()]}function L(a,b){function c(){return h("No tagged elements ("+b+") found on page"),fa}var d=document.querySelectorAll("["+b+"]");return 0===d.length?c():I(a,d)}function M(a,b){function c(){return h("No tagged elements ("+b+") found on page"),fa}var d=document.querySelectorAll("["+b+"]");return 0===d.length?c():J(a,d)}function N(){return document.querySelectorAll("body *")}function O(a,b,c,d){function e(){fa=l,Aa=m,T(fa,Aa,a)}function f(){function a(a,b){var c=Math.abs(a-b)<=wa;return!c}return l=void 0!==c?c:Ia[ha](),m=void 0!==d?d:Ja[Ca](),a(fa,l)||ba&&a(Aa,m)}function h(){return!(a in{init:1,interval:1,size:1})}function i(){return ha in ra||ba&&Ca in ra}function j(){g("No change in size detected")}function k(){h()&&i()?S(b):a in{interval:1}||j()}var l,m;f()||"init"===a?(Q(),e()):k()}function P(a,b,c,d){function e(){a in{reset:1,resetPage:1,init:1}||g("Trigger event: "+b)}function f(){return xa&&a in ca}f()?g("Trigger event cancelled: "+a):(e(),Ka(a,b,c,d))}function Q(){xa||(xa=!0,g("Trigger event lock on")),clearTimeout(ya),ya=setTimeout(function(){xa=!1,g("Trigger event lock off"),g("--")},da)}function R(a){fa=Ia[ha](),Aa=Ja[Ca](),T(fa,Aa,a)}function S(a){var b=ha;ha=ga,g("Reset trigger event: "+a),Q(),R("reset"),ha=b}function T(a,b,c,d,e){function f(){void 0===e?e=va:g("Message targetOrigin: "+e)}function h(){var f=a+":"+b,h=qa+":"+f+":"+c+(void 0!==d?":"+d:"");g("Sending message to host page ("+h+")"),ua.postMessage(oa+h,e)}!0===ta&&(f(),h())}function U(b){function c(){return oa===(""+b.data).substr(0,pa)}function d(){ja=b.data,ua=b.source,i(),ea=!1,setTimeout(function(){ia=!1},da)}function e(){ia?g("Page reset ignored by init"):(g("Page size reset by host page"),R("resetPage"))}function f(){P("resizeParent","Parent window requested size check")}function j(){var a=l();ka.findTarget(a)}function k(){return b.data.split("]")[1].split(":")[0]}function l(){return b.data.substr(b.data.indexOf(":")+1)}function m(){return"iFrameResize"in a}function n(){var a=l();g("MessageCallback called from parent: "+a),Ea(JSON.parse(a)),g(" --")}function o(){var a=l();g("PageInfoFromParent called from parent: "+a),Ga(JSON.parse(a)),g(" --")}function p(){return b.data.split(":")[2]in{"true":1,"false":1}}function q(){switch(k()){case"reset":e();break;case"resize":f();break;case"moveToAnchor":j();break;case"message":n();break;case"pageInfo":o();break;default:m()||p()||h("Unexpected message ("+b.data+")")}}function r(){!1===ea?q():p()?d():g('Ignored message of type "'+k()+'". Received before initialization.')}c()&&r()}function V(){"loading"!==document.readyState&&a.parent.postMessage("[iFrameResizerChild]Ready","*")}var W=!0,X=10,Y="",Z=0,$="",_=null,aa="",ba=!1,ca={resize:1,click:1},da=128,ea=!0,fa=1,ga="bodyOffset",ha=ga,ia=!0,ja="",ka={},la=32,ma=null,na=!1,oa="[iFrameSizer]",pa=oa.length,qa="",ra={max:1,min:1,bodyScroll:1,documentElementScroll:1},sa="child",ta=!0,ua=a.parent,va="*",wa=0,xa=!1,ya=null,za=16,Aa=1,Ba="scroll",Ca=Ba,Da=a,Ea=function(){h("MessageCallback function not defined")},Fa=function(){},Ga=function(){},Ha=Date.now||function(){return(new Date).getTime()},Ia={bodyOffset:function(){return document.body.offsetHeight+G("marginTop")+G("marginBottom")},offset:function(){return Ia.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,K(Ia))},min:function(){return Math.min.apply(null,K(Ia))},grow:function(){return Ia.max()},lowestElement:function(){return Math.max(Ia.bodyOffset(),I("bottom",N()))},taggedElement:function(){return L("bottom","data-iframe-height")},taggedElementHeight:function(){return M("height","data-iframe-height")}},Ja={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Ja.bodyScroll(),Ja.documentElementScroll())},max:function(){return Math.max.apply(null,K(Ja))},min:function(){return Math.min.apply(null,K(Ja))},rightMostElement:function(){return I("right",N())},taggedElement:function(){return L("right","data-iframe-width")},taggedElementWidth:function(){return M("width","data-iframe-width")}},Ka=e(O);b(a,"message",U),V()}(window||{});
//# sourceMappingURL=iframeResizer.contentWindow.map